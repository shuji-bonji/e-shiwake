# ブラウザ操作ガイド

WebMCPが使えない環境で、ブラウザ操作ツール（Claude in Chrome等）を使ってe-shiwakeを操作する手順。

## 前提

- e-shiwake URL: https://shuji-bonji.github.io/e-shiwake/
- ローカル開発: http://localhost:5173/

## ページ構成

| パス             | 機能                                  |
| ---------------- | ------------------------------------- |
| `/`              | 仕訳帳（ホーム）                      |
| `/ledger`        | 総勘定元帳                            |
| `/trial-balance` | 試算表                                |
| `/profit-loss`   | 損益計算書                            |
| `/balance-sheet` | 貸借対照表                            |
| `/tax-summary`   | 消費税集計                            |
| `/fixed-assets`  | 固定資産台帳                          |
| `/blue-return`   | 青色申告決算書                        |
| `/reports`       | 帳簿出力（一括印刷・CSV ZIP）         |
| `/invoice`       | 請求書一覧                            |
| `/vendors`       | 取引先管理                            |
| `/accounts`      | 勘定科目管理                          |
| `/data`          | データ管理（エクスポート/インポート） |
| `/help`          | ヘルプ                                |

## 仕訳入力の詳細手順

### 新規仕訳

1. **年度を選択**: サイドバーの「年度」セクションで対象年度をクリック
2. **新規ボタン**: 画面右上の「➕ 新規仕訳」ボタンをクリック
3. **日付入力**: 日付フィールドにYYYY-MM-DD形式で入力
4. **摘要入力**: 摘要フィールドに取引内容を入力
5. **借方の入力**:
   - 勘定科目のドロップダウンから選択（入力でフィルタ可能）
   - 金額を入力
   - 消費税区分が自動設定される（勘定科目のデフォルト値）
6. **貸方の入力**: 同様に勘定科目と金額を入力
7. **取引先入力**: 取引先フィールドに入力（オートコンプリート対応）
8. **バリデーション確認**: 借方合計 = 貸方合計 であること
9. **確定**: ✓ ボタンをクリック

### 複合仕訳（複数行）

借方または貸方を複数行にする場合:

1. 借方ヘッダーの「+」ボタン → 借方行を追加
2. 貸方ヘッダーの「+」ボタン → 貸方行を追加
3. 各行に勘定科目と金額を入力

### 仕訳の編集

- 各フィールドをクリックして直接編集（インライン編集）
- 変更は即座に自動保存される

### 仕訳の削除

- 仕訳行右端の 🗑 ボタンをクリック
- 確認ダイアログで「削除」を選択

### 仕訳の検索

- 仕訳帳画面上部の検索ボックスに入力
- スペース区切りでAND検索
- 全年度横断で検索される

## 証憑（PDF）の紐付け

1. PDFファイルを仕訳行の右側のドロップゾーンにドラッグ＆ドロップ
2. 取引先が未入力の場合、入力を促される
3. 自動リネーム: `{日付}_{種類}_{摘要}_{金額}円_{取引先}.pdf`
4. 証跡ステータスが 📎 に変更される

## データエクスポート

1. サイドバー → 「データ管理」をクリック
2. 対象年度のカードを確認
3. エクスポート形式を選択:
   - **JSON**: 完全バックアップ（仕訳 + 勘定科目 + 取引先 + 設定）
   - **CSV**: 仕訳のみ（他ソフト連携用）
   - **ZIP**: JSON + PDF証憑同梱（年次アーカイブ用）

## データインポート

1. データ管理ページのインポートセクション
2. 「ファイルを選択」でJSONファイルを指定
3. プレビュー表示で内容を確認
4. マージ（追加）/ 上書き モードを選択
5. 実行

## 帳簿の印刷・CSV出力

各帳簿ページ（総勘定元帳、試算表等）で:

- **印刷**: ページ右上の印刷ボタン → ブラウザの印刷ダイアログ（PDFに保存も可能）
- **CSV出力**: CSVボタンでダウンロード

一括出力は `/reports` ページから。

## キーボードショートカット

仕訳入力時:

- **Tab**: 次のフィールドへ移動（日付→摘要→借方→貸方→取引先→PDF→循環）
- **Enter**: 確定（バリデーション通過時）
- **Escape**: 編集をキャンセル
